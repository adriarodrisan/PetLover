{
    "sourceFile": "Paginas_web/login.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 6,
            "patches": [
                {
                    "date": 1741794668563,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1741794679958,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,5 +3,6 @@\n include('conexion.php');\r\n \r\n if (!$conn) {\r\n     die(\"Error de conexi칩n: \" . mysqli_connect_error());\r\n+}\r\n ?>\n\\ No newline at end of file\n"
                },
                {
                    "date": 1741794729680,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,7 +2,7 @@\n session_start();\r\n include('conexion.php');\r\n \r\n if (!$conn) {\r\n-    die(\"Error de conexi칩n: \" . mysqli_connect_error());\r\n+    die(\"Conexion fallida: \" . mysqli_connect_error());\r\n }\r\n ?>\n\\ No newline at end of file\n"
                },
                {
                    "date": 1741794761516,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,5 +4,12 @@\n \r\n if (!$conn) {\r\n     die(\"Conexion fallida: \" . mysqli_connect_error());\r\n }\r\n+$correo = trim($_POST['correo']);\r\n+$contrasena = trim($_POST['contrasena']);\r\n+\r\n+if (empty($correo) || empty($contrasena)) {\r\n+    echo \"Por favor completa todos los campos.\";\r\n+    exit;\r\n+}\r\n ?>\n\\ No newline at end of file\n"
                },
                {
                    "date": 1741794823182,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,18 @@\n+<?php\r\n+session_start();\r\n+include('conexion.php');\r\n+\r\n+if (!$conn) {\r\n+    die(\"Conexion fallida: \" . mysqli_connect_error());\r\n+}\r\n+$correo = trim($_POST['correo']);\r\n+$contrasena = trim($_POST['contrasena']);\r\n+\r\n+if (empty($correo) || empty($contrasena)) {\r\n+    echo \"Por favor completa todos los campos.\";\r\n+    exit;\r\n+}\r\n+$sql_adoptante = \"SELECT * FROM adoptante WHERE Correo = '$correo'\";\r\n+$resultado_adoptante = mysqli_query($conn, $sql_adoptante);\r\n+\r\n+?>\n\\ No newline at end of file\n"
                },
                {
                    "date": 1741794852250,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,21 @@\n+<?php\r\n+session_start();\r\n+include('conexion.php');\r\n+\r\n+if (!$conn) {\r\n+    die(\"Conexion fallida: \" . mysqli_connect_error());\r\n+}\r\n+$correo = trim($_POST['correo']);\r\n+$contrasena = trim($_POST['contrasena']);\r\n+\r\n+if (empty($correo) || empty($contrasena)) {\r\n+    echo \"Por favor completa todos los campos.\";\r\n+    exit;\r\n+}\r\n+$sql_adoptante = \"SELECT * FROM adoptante WHERE Correo = '$correo'\";\r\n+$resultado_adoptante = mysqli_query($conn, $sql_adoptante);\r\n+\r\n+if (mysqli_num_rows($resultado_adoptante) > 0) {\r\n+    $fila = mysqli_fetch_assoc($resultado_adoptante);\r\n+}\r\n+?>\n\\ No newline at end of file\n"
                },
                {
                    "date": 1741794936422,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -16,6 +16,12 @@\n $resultado_adoptante = mysqli_query($conn, $sql_adoptante);\r\n \r\n if (mysqli_num_rows($resultado_adoptante) > 0) {\r\n     $fila = mysqli_fetch_assoc($resultado_adoptante);\r\n+\r\n+    if (password_verify($contrasena, $fila['Contrase침a'])) {\r\n+        $_SESSION['usuario'] = $fila['Nombre'];\r\n+        $_SESSION['rol'] = 'refugio';\r\n+        header(\"Location: Home_Petlover.html\");\r\n+        exit;\r\n }\r\n ?>\n\\ No newline at end of file\n"
                }
            ],
            "date": 1741794668563,
            "name": "Commit-0",
            "content": "<?php\r\nsession_start();\r\ninclude('conexion.php');\r\n\r\nif (!$conn) {\r\n    die(\"Error de conexi칩n: \" . mysqli_connect_error());\r\n?>"
        }
    ]
}